---
original_url: https://xquartz.macosforge.org/trac/ticket/122
created_at: 2008-06-09 07:15:44 -0700
updated_at: 2015-08-13 02:02:37 -0700
closed_at: 2010-04-12 11:03:48 -0700
status: closed
type: crash
resolution: Fixed
reporter: dhess31@…
owner: jeremyhu@…
priority: Important
milestone: 2.5.0
component: GLX
version: 2.2.1 (xserver-1.3.0-apple20)
cc:
  - derrick22@…
  - jimumbra@…
  - lhunath@…
  - mayer.julian@…
  - yunzheng.hu@…
  - lsproc@…
  - philipp@…
  - brad@…
  - lriutzel@…
  - rwoodsmall@…
  - deadballo@…
---

GLX: wine doesn't play ball
===========================


This is a new issue it seems, and not one of the previous closed ones.

Compiling wine rc4 now finds the OpenGL libs properly, and the linker seems to find the libs properly. The deadlock seems to be fixed, but a new issue has arisen.

When running wine (using the DYLD fallback path trick) no longer do those "liBGL not found" errors appear.

however, this error appears: "err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems."

however, glxinfo reports that GLX\_SGIX\_fbconfig IS supported.

Finally wine dies with:

trace:wgl:X11DRV\_ChoosePixelFormat (0x131de0,0x32f3a4)
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - size / version : 40 / 1
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - dwFlags : PFD\_DOUBLEBUFFER PFD\_DRAW\_TO\_WINDOW PFD\_SUPPORT\_OPENGL
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - iPixelType : PFD\_TYPE\_RGBA
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Color : 32
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Red : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Green : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Blue : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Alpha : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Accum : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Depth : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Stencil : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Aux : 0
trace:wgl:dump\_PIXELFORMATDESCRIPTOR - iLayerType : PFD\_MAIN\_PLANE
trace:wgl:X11DRV\_ChoosePixelFormat No matching mode was found returning 0
err:d3d:WineD3D\_CreateFakeGLContext Can't find a suitable iPixelFormat
err:d3d:InitAdapters Failed to get a gl context for default adapter
err:wine\_d3d:WineDirect3DCreate Direct3D8 is not available without opengl



---

*dhess31@…* commented *[on Jun 11, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:1 "June 11, 2008 at 5:48 AM PDT")*

-   **Version** set to *2.2.1 (xserver-1.3)*



---

*dhess31@…* commented *[on Jun 17, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:2 "June 17, 2008 at 5:14 AM PDT")*

This also happens with 2.2.2 and wine rc5



---

*jeremyhu@…* commented *[on Jun 21, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:3 "June 21, 2008 at 8:56 AM PDT")*

-   **Summary** changed from *Another OpenGL issue* to *GLX: support fbconfig*



---

*jeremyhu@…* commented *[on Jun 21, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:4 "June 21, 2008 at 8:57 AM PDT")*

-   **Milestone** set to *3.0*



---

*vladimir.endaltcev@…* commented *[on Jun 30, 2008](https://xquartz.macosforge.org/trac/attachment/ticket/122/opengl_issue.trc "June 30, 2008 at 12:57 PM PDT")*

-   **Attachment** *[opengl\_issue.trc](../attachment/ticket/122/opengl_issue.trc)* (3.3 KB) added



---

*vladimir.endaltcev@…* commented *[on Jun 30, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:5 "June 30, 2008 at 12:58 PM PDT")*

This also happens with 2.2.3 and wine 1.0.
I've attached trace file Opengl crashing.



---

*jeremyhu@…* commented *[on Aug 16, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:6 "August 16, 2008 at 1:15 AM PDT")*

-   **Milestone** changed from *3.0* to *2.4.0*



---

*vladimir.endaltcev@…* commented *[on Sep 22, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:7 "September 22, 2008 at 3:44 AM PDT")*

As for new builds got the same situation. After installing and compiling X11 2.3.1 and wine 1.1.5 faced to:
---
err:wgl:has\_opengl Failed to load libGL: dlopen(libGL.1.dylib, 266): image not found
err:wgl:has\_opengl OpenGL support is disabled.

Then set LD\_LIBRARY\_PATH to /usr/X11/lib and ran wineprefixcreate:
---
err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems.

Unset LD\_LIBRARY\_PATH, set DYLD\_LIBRARY\_PATH to /usr/X11/lib and got:
---
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
Could not load Mozilla. HTML rendering will be disabled.
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems.

Could you provide any info why it may happen?
Thanks in advance,
Vladimir



---

*vladimir.endaltcev@…* commented *[on Sep 22, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:8 "September 22, 2008 at 3:49 AM PDT")*

Sorry for unreadable update. Corrected one:

As for new builds got the same situation. After installing and compiling X11 2.3.1 and wine 1.1.5 faced to:
---
err:wgl:has\_opengl Failed to load libGL: dlopen(libGL.1.dylib, 266): image not found
err:wgl:has\_opengl OpenGL support is disabled.

Then set LD\_LIBRARY\_PATH to /usr/X11/lib and ran wineprefixcreate:
---
err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems.

Unset LD\_LIBRARY\_PATH, set DYLD\_LIBRARY\_PATH to /usr/X11/lib and got:
---
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
dyld: warning, DYLD\_ setting caused circular dependency in /usr/X11/lib/libGL.dylib
err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems.

Could you provide any info why it may happen?
Thanks in advance, Vladimir



---

*jeremyhu@…* commented *[on Sep 22, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:9 "September 22, 2008 at 8:58 AM PDT")*

The correct libs are being loaded with your second attempt there. You get errors in the first one because it looks like there are problems in wine's compilation (report it to them). You get problems with setting DYLD\_LIBRARY\_PATH because /usr/X11/lib/libGL.dylib depends on /System/Library/Frameworks/OpenGL.framework/.../libGL.dylib and you're breaking that.

If you need to set env variables to get linking, there's something wrong. Report the problem to the wine guys, so they can fix it in their binaries. You can check the individual binaries by running 'otool -L &lt;binary&gt;'

You're getting "err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems." correctly because fbconfig isn't supported yet.



---

*vladimir.endaltcev@…* commented *[on Sep 27, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:10 "September 27, 2008 at 11:57 PM PDT")*

Do you plan to support GLX\_SGIX\_fbconfig in the future?



---

*lhunath@…* commented *[on Oct 1, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:11 "October 1, 2008 at 4:04 PM PDT")*

-   **Cc** *lhunath@…* added



---

*jeremyhu@…* commented *[on Oct 8, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:12 "October 8, 2008 at 1:20 PM PDT")*

-   **Owner** changed from *jeremyhu@…* to *gstaplin@…*



---

*mayer.julian@…* commented *[on Oct 29, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:13 "October 29, 2008 at 12:16 PM PDT")*

-   **Cc** *mayer.julian@…* added



---

*mayer.julian@…* commented *[on Oct 29, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:14 "October 29, 2008 at 12:27 PM PDT")*

-   **Cc** *mayer.julian@…* removed



---

*mayer.julian@…* commented *[on Oct 29, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:15 "October 29, 2008 at 12:27 PM PDT")*

-   **Cc** *mayer.julian@…* added



---

*yunzheng.hu@…* commented *[on Oct 30, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:16 "October 30, 2008 at 5:20 PM PDT")*

-   **Cc** *yunzheng.hu@…* added



---

*lsproc@…* commented *[on Oct 31, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:17 "October 31, 2008 at 11:58 AM PDT")*

-   **Cc** *lsproc@…* added



---

*philipp@…* commented *[on Nov 15, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:18 "November 15, 2008 at 10:30 AM PST")*

-   **Cc** *philipp@…* added



---

*gregcouch@…* commented *[on Nov 19, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:19 "November 19, 2008 at 4:34 PM PST")*

The chimera molecular visualization program dies in glxcmds.c for the same reason in XQuartz 2.3.2 beta3. Chimera can be downloaded from <http://www.cgl.ucsf.edu/chimera/>.

WARNING: unknown visual config tag: 4
Assertion failed: (!!req-&gt;stereoMode == !!(\*a)-&gt;stereoMode), function
fbconfig\_compare, file glxcmds.c, line 1231.
Abort trap



---

*gstaplin@…* commented *[on Nov 20, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:20 "November 20, 2008 at 3:42 PM PST")*

-   **Status** changed from *new* to *closed*
-   **Resolution** changed from to *fixed*

Replying to [gregcouch@…](https://xquartz.macosforge.org/trac/ticket/122#comment:19):

> The chimera molecular visualization program dies in glxcmds.c for the same reason in XQuartz 2.3.2 beta3. Chimera can be downloaded from <http://www.cgl.ucsf.edu/chimera/>.
>
> WARNING: unknown visual config tag: 4
> Assertion failed: (!!req-&gt;stereoMode == !!(\*a)-&gt;stereoMode), function
> fbconfig\_compare, file glxcmds.c, line 1231.
> Abort trap

I know what is causing this now. The next release candidate (RC) of XQuartz should have the fix, and I've verified that it works.



---

*jeremyhu@…* commented *[on Nov 22, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:21 "November 22, 2008 at 1:02 PM PST")*

-   **Milestone** changed from *OpenGL.framework DRI* to *2.3.2*



---

*neo.lee@…* commented *[on Dec 5, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:22 "December 5, 2008 at 9:53 PM PST")*

This issue is still occurred in the newest 2.3.2 rc build. I tried wine-1.0.1 with the Warcraft II BNE and got this:

err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems.



---

*derrick22@…* commented *[on Dec 31, 2008](https://xquartz.macosforge.org/trac/ticket/122#comment:23 "December 31, 2008 at 1:31 PM PST")*

According to gstaplin, this has been fixed by a RC of 2.3.2. Just to be sure, I have tried all the RCs though the current build of RC5. There is still an issue. I get

err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems.

Replying to [dhess31@…](https://xquartz.macosforge.org/trac/ticket/122):

> This is a new issue it seems, and not one of the previous closed ones.
>
> Compiling wine rc4 now finds the OpenGL libs properly, and the linker seems to find the libs properly. The deadlock seems to be fixed, but a new issue has arisen.
>
> When running wine (using the DYLD fallback path trick) no longer do those "liBGL not found" errors appear.
>
> however, this error appears: "err:wgl:has\_opengl glx\_version is 1.2 and GLX\_SGIX\_fbconfig extension is unsupported. Expect problems."
>
> however, glxinfo reports that GLX\_SGIX\_fbconfig IS supported.
>
> Finally wine dies with:
>
> trace:wgl:X11DRV\_ChoosePixelFormat (0x131de0,0x32f3a4)
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - size / version : 40 / 1
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - dwFlags : PFD\_DOUBLEBUFFER PFD\_DRAW\_TO\_WINDOW PFD\_SUPPORT\_OPENGL
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - iPixelType : PFD\_TYPE\_RGBA
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Color : 32
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Red : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Green : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Blue : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Alpha : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Accum : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Depth : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Stencil : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - Aux : 0
> trace:wgl:dump\_PIXELFORMATDESCRIPTOR - iLayerType : PFD\_MAIN\_PLANE
> trace:wgl:X11DRV\_ChoosePixelFormat No matching mode was found returning 0
> err:d3d:WineD3D\_CreateFakeGLContext Can't find a suitable iPixelFormat
> err:d3d:InitAdapters Failed to get a gl context for default adapter
> err:wine\_d3d:WineDirect3DCreate Direct3D8 is not available without opengl



---

*brad@…* commented *[on Jan 16, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:24 "January 16, 2009 at 1:16 PM PST")*

-   **Cc** *brad@…* added



---

*lriutzel@…* commented *[on Jan 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:25 "January 17, 2009 at 10:59 PM PST")*

-   **Cc** *lriutzel@…* added



---

*jimumbra@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:26 "January 31, 2009 at 11:54 AM PST")*

so without this there is no way to use wine with mac?

Cc Me!



---

*gstaplin@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:27 "January 31, 2009 at 12:34 PM PST")*

-   **Status** changed from *closed* to *reopened*
-   **Resolution** *fixed* deleted

It seems there's a bug in the libGL I hadn't noticed. GLX\_SGIX\_fbconfig is supported and works, but here's where it's odd...

glxinfo reports server extensions: GLX\_SGIX\_fbconfig

glxinfo reports: client glx extensions: GLX\_SGIX\_fbconfig...

The final resulting extension string seems to be (according to glxinfo -v):
GLX extensions:

> GLX\_ARB\_get\_proc\_address, GLX\_EXT\_import\_context, GLX\_EXT\_visual\_info,
> GLX\_EXT\_visual\_rating

This is what it looks like with glXGetClientString(dpy, GLX\_EXTENSIONS) (in a test program):
$ ./glXGetClientString
glXGetClientString(dpy, GLX\_EXTENSIONS) is GLX\_ARB\_get\_proc\_address GLX\_ARB\_multisample GLX\_EXT\_import\_context GLX\_EXT\_visual\_info GLX\_EXT\_visual\_rating GLX\_MESA\_allocate\_memory GLX\_MESA\_swap\_control GLX\_MESA\_swap\_frame\_usage GLX\_OML\_swap\_method GLX\_OML\_sync\_control GLX\_SGI\_make\_current\_read GLX\_SGI\_swap\_control GLX\_SGI\_video\_sync GLX\_SGIS\_multisample GLX\_SGIX\_fbconfig GLX\_SGIX\_visual\_select\_group

$ ./glXQueryExtensionsString
glXQueryExtensionsString(dpy, screen) is GLX\_ARB\_get\_proc\_address GLX\_EXT\_import\_context GLX\_EXT\_visual\_info GLX\_EXT\_visual\_rating

Something is wrong with the glXQueryExtensionsString path when it generates the final list/string of extensions in the 2.3.2 branch with that libGL. Multisampling also works in that version of libGL.

Sorry I prematurely declared it fixed...



---

*jeremyhu@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:28 "January 31, 2009 at 1:11 PM PST")*

-   **Cc** *derrick22@…*, *jimumbra@…* added



---

*jeremyhu@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/attachment/ticket/122/libGL.1.dylib.bz2 "January 31, 2009 at 4:54 PM PST")*

-   **Attachment** *[libGL.1.dylib.bz2](../attachment/ticket/122/libGL.1.dylib.bz2)* (679.7 KB) added

libGL.1.dylib.bz2



---

*jeremyhu@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:29 "January 31, 2009 at 4:55 PM PST")*

1) What wine applications are you guys trying? I'd like to have a test case for myself.

2) Please try the attached libGL.1.dylib.bz2. Download it, decompress it, and replace /usr/X11/lib/libGL.1.dylib with it.



---

*jeremyhu@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:30 "January 31, 2009 at 5:10 PM PST")*

Greg: Can you give me a quick "walk through" for triggering this with chimera?



---

*brad@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:31 "January 31, 2009 at 5:14 PM PST")*

1) for me it is trying to get dxdiag to work after following the directions at <http://www.wine-reviews.net/microsoft/directx-90c-march-2008-redistributable-on-linux-with-wine.html> . i use to get the same error as mentioned, but as of 2.4.0\_alpha2 , new error, same crash point

     Error of failed request:  BadValue (integer parameter out of range for operation)
      Major opcode of failed request:  148 (GLX)
      Minor opcode of failed request:  3 (X_GLXCreateContext)
      Value in failed request:  0x22
      Serial number of failed request:  3297
      Current serial number in output stream:  3298

sidenote, as of 2.3.2.1 rls, i no longer need to apply the fixes as listed at <http://www.nabble.com/Mac-OSX-(10.5)---wine-w--OpenGL---Info---Issues-td19109149.html#a19109149>

2) still failing even with new file

    -rw-r--r--@ 1 root  wheel  3097984 Jan 31 19:04 libGL.1.2.dylib
    -rwxr-xr-x  1 root  wheel   574448 Jan 27 00:00 libGL.1.2.dylib.org
    lrwxr-xr-x  1 root  wheel       15 Jan 31 14:05 libGL.1.dylib -> libGL.1.2.dylib
    lrwxr-xr-x  1 root  wheel       15 Jan 31 14:05 libGL.dylib -> libGL.1.2.dylib


---

*jeremyhu@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:32 "January 31, 2009 at 5:43 PM PST")*

brad: 2.4.0\_alpha2 has a new rewritten libGL. The libGL attached is based off the "old" libGL in 2.3.2.1 and 2.4.0\_alpha1.

We the nabble stuff...

1) was fixed with xcode-3.1
2) I fixed that in wine in macports a few weeks ago
3) that issue is what is being addressed in the new libGL (with some fixes merged into the older libGL)



---

*jimumbra@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:33 "January 31, 2009 at 7:49 PM PST")*

I think the new file helped, but still ended up crashing... here is my whole error output via terminal, not sure if it will help...

fixme:wave:wodDsCreate DirectSound not implemented
fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
err:ole:COMPOBJ\_DllList\_Add couldn't load in-process dll L"a3dapi.dll"
err:ole:CoGetClassObject no class object {92fa2c24-253c-11d2-90fb-006008a1f441} could be created for context 0x1
fixme:wave:wodDsCreate DirectSound not implemented
fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
fixme:wave:wodDsCreate DirectSound not implemented
fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
err:d3d\_caps:IWineD3DImpl\_FillGLCaps Invalid nVidia version string: "2.0 NVIDIA-1.5.36"
fixme:d3d:IWineD3DImpl\_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
fixme:d3d:IWineD3DImpl\_FillGLCaps Expected vertex samplers + MAX\_TEXTURES(=8) &gt; combined\_samplers
wine: Unhandled page fault on execute access to 0x00000000 at address 0x0 (thread 0022), starting debugger...
Unhandled exception: page fault on execute access to 0x00000000 in 32-bit code (0x00000000).
Register dump:

> CS:0017 SS:001f DS:001f ES:001f FS:1007 GS:0037
> EIP:00000000 ESP:0033eebc EBP:0033f0a8 EFLAGS:00210202( - 00 - -RI1)
> EAX:0033f08c EBX:7585275b ECX:75903270 EDX:00000001
> ESI:75903270 EDI:75903270

Stack dump:
0x0033eebc: 7585af21 00008804 000088b5 0033f08c
0x0033eecc: 758e7358 00000010 00000010 0033ef48
0x0033eedc: 7b881acb 0033ef5c 0033f008 7b8192a9
0x0033eeec: 7b881acb 604fee10 00000000 758e7b13
0x0033eefc: 00000009 00000000 0033ef20 0033ef68
0x0033ef0c: 7b881ce0 0033ef3c 00000000 7b8193e1
0200: sel=1007 base=7def0000 limit=0000ffff 32-bit rw-
Backtrace:
=&gt;1 0x00000000 (0x0033f0a8)

> 2 0x75860ab8 (0x0033f558)
> 3 0x758d8030 (0x0033f5a8)
> 4 0x757ca044 (0x0033f648)
> 5 0x757ca93b (0x0033f6a8)

0x00000000: -- no code accessible --
Modules:
Module Address Debug info Name (27 modules)
PE 400000- 622f000 Deferred nwmain
PE 21100000-2115f000 Deferred mss32
PE 22100000-2211f000 Deferred mssa3d.m3d
PE 22200000-22219000 Deferred mssds3d.m3d
PE 22300000-22329000 Deferred msseax.m3d
PE 22400000-22417000 Deferred msssoft.m3d
PE 22600000-2261c000 Deferred mssdx7.m3d
PE 22700000-22764000 Deferred mssrsx.m3d
PE 24100000-2411c000 Deferred mssdsp.flt
PE 26400000-26436000 Deferred mssvoice.asi
PE 26f00000-26f2a000 Deferred mssmp3.asi
PE 30000000-3006d000 Deferred binkw32
PE 60180000-60184000 Deferred advapi32
PE 60310000-60325000 Deferred user32
PE 60480000-60484000 Deferred gdi32
PE 60540000-60544000 Deferred ole32
PE 60610000-60614000 Deferred rpcrt4
PE 60690000-60694000 Deferred opengl32
PE 61ad0000-61b1d000 Deferred winmm
PE 61bb0000-61bb4000 Deferred wsock32
PE 61bd0000-61bd4000 Deferred ws2\_32
PE 61c00000-61c03000 Deferred glu32
PE 61c80000-61c84000 Deferred version
PE 743b0000-743b4000 Deferred dsound
PE 757a0000-757a4000 Deferred ddraw
PE 7b810000-7b887000 Deferred kernel32
PE 7bc10000-7bc14000 Deferred ntdll
Threads:
process tid prio (all id:s are in hex)
0000000c

> 00000012 0
> 0000000e 0
> 0000000d 0

0000000f

> 00000016 0
> 00000015 0
> 00000011 0
> 00000010 0

00000018

> 00000019 0

0000001f

> 00000020 0

00000021 (D) C:\\NeverwinterNights\\NWN\\nwmain.exe

> 0000002a 0
> 00000029 0
> 00000027 15
> 00000026 15
> 00000024 0
> 00000023 0
> 00000022 0 &lt;==

Backtrace:
=&gt;1 0x00000000 (0x0033f0a8)

> 2 0x75860ab8 (0x0033f558)
> 3 0x758d8030 (0x0033f5a8)
> 4 0x757ca044 (0x0033f648)
> 5 0x757ca93b (0x0033f6a8)

fixme:winmm:MMDRV\_Exit Closing while ll-driver open



---

*jeremyhu@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:34 "January 31, 2009 at 10:53 PM PST")*

Cleaning up spew from the last entry to be easier on the eyes...

    fixme:wave:wodDsCreate DirectSound not implemented
    fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
    err:ole:COMPOBJ_DllList_Add couldn't load in-process dll L"a3dapi.dll"
    err:ole:CoGetClassObject no class object {92fa2c24-253c-11d2-90fb-006008a1f441} could be created for context 0x1
    fixme:wave:wodDsCreate DirectSound not implemented
    fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
    fixme:wave:wodDsCreate DirectSound not implemented
    fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
    err:d3d_caps:IWineD3DImpl_FillGLCaps Invalid nVidia version string: "2.0 NVIDIA-1.5.36"
    fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
    fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers
    wine: Unhandled page fault on execute access to 0x00000000 at address 0x0 (thread 0022), starting debugger...
    Unhandled exception: page fault on execute access to 0x00000000 in 32-bit code (0x00000000).
    Register dump:
     CS:0017 SS:001f DS:001f ES:001f FS:1007 GS:0037
     EIP:00000000 ESP:0033eebc EBP:0033f0a8 EFLAGS:00210202(   - 00      - -RI1)
     EAX:0033f08c EBX:7585275b ECX:75903270 EDX:00000001
     ESI:75903270 EDI:75903270
    Stack dump:
    0x0033eebc:  7585af21 00008804 000088b5 0033f08c
    0x0033eecc:  758e7358 00000010 00000010 0033ef48
    0x0033eedc:  7b881acb 0033ef5c 0033f008 7b8192a9
    0x0033eeec:  7b881acb 604fee10 00000000 758e7b13
    0x0033eefc:  00000009 00000000 0033ef20 0033ef68
    0x0033ef0c:  7b881ce0 0033ef3c 00000000 7b8193e1
    0200: sel=1007 base=7def0000 limit=0000ffff 32-bit rw-
    Backtrace:
    =>1 0x00000000 (0x0033f0a8)
      2 0x75860ab8 (0x0033f558)
      3 0x758d8030 (0x0033f5a8)
      4 0x757ca044 (0x0033f648)
      5 0x757ca93b (0x0033f6a8)
    0x00000000: -- no code accessible --
    Modules:
    Module  Address                 Debug info      Name (27 modules)
    PE        400000- 622f000       Deferred        nwmain
    PE      21100000-2115f000       Deferred        mss32
    PE      22100000-2211f000       Deferred        mssa3d.m3d
    PE      22200000-22219000       Deferred        mssds3d.m3d
    PE      22300000-22329000       Deferred        msseax.m3d
    PE      22400000-22417000       Deferred        msssoft.m3d
    PE      22600000-2261c000       Deferred        mssdx7.m3d
    PE      22700000-22764000       Deferred        mssrsx.m3d
    PE      24100000-2411c000       Deferred        mssdsp.flt
    PE      26400000-26436000       Deferred        mssvoice.asi
    PE      26f00000-26f2a000       Deferred        mssmp3.asi
    PE      30000000-3006d000       Deferred        binkw32
    PE      60180000-60184000       Deferred        advapi32
    PE      60310000-60325000       Deferred        user32
    PE      60480000-60484000       Deferred        gdi32
    PE      60540000-60544000       Deferred        ole32
    PE      60610000-60614000       Deferred        rpcrt4
    PE      60690000-60694000       Deferred        opengl32
    PE      61ad0000-61b1d000       Deferred        winmm
    PE      61bb0000-61bb4000       Deferred        wsock32
    PE      61bd0000-61bd4000       Deferred        ws2_32
    PE      61c00000-61c03000       Deferred        glu32
    PE      61c80000-61c84000       Deferred        version
    PE      743b0000-743b4000       Deferred        dsound
    PE      757a0000-757a4000       Deferred        ddraw
    PE      7b810000-7b887000       Deferred        kernel32
    PE      7bc10000-7bc14000       Deferred        ntdll
    Threads:
    process  tid      prio (all id:s are in hex)
    0000000c
            00000012    0
            0000000e    0
            0000000d    0
    0000000f
            00000016    0
            00000015    0
            00000011    0
            00000010    0
    00000018
            00000019    0
    0000001f
            00000020    0
    00000021 (D) C:\NeverwinterNights\NWN\nwmain.exe
            0000002a    0
            00000029    0
            00000027   15
            00000026   15
            00000024    0
            00000023    0
            00000022    0 <==
    Backtrace:
    =>1 0x00000000 (0x0033f0a8)
      2 0x75860ab8 (0x0033f558)
      3 0x758d8030 (0x0033f5a8)
      4 0x757ca044 (0x0033f648)
      5 0x757ca93b (0x0033f6a8)
    fixme:winmm:MMDRV_Exit Closing while ll-driver open



---

*jeremyhu@…* commented *[on Jan 31, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:35 "January 31, 2009 at 10:56 PM PST")*

err:d3d\_caps:IWineD3DImpl\_FillGLCaps Invalid nVidia version string: "2.0 NVIDIA-1.5.36"

That stands out as atleast interesting. I wonder what wine expects it to be (note that you can see the version string in 'glxinfo'):

OpenGL version string: 2.0 NVIDIA-1.5.36



---

*gregcouch@…* commented *[on Feb 1, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:36 "February 1, 2009 at 11:55 PM PST")*

To reproduce this bug using UCSF Chimera, you need a stereo Mac (or finagle the X11 server to provide stereo visuals), download the OS X X11 version from &lt;<http://www.cgl.ucsf.edu/chimera/download.html>&gt;. Then use the File / Fetch a PDB file (type-in the example 1yti), then bring up the Camera tool (Tools / Viewing Controls / Camera), and change the camera mode from mono to sequential stereo and back. I haven't tried the 2.3.2 release yet, but the last release candidate still had problems -- couldn't switch back and forth, but starting in stereo from the command line worked (Chimera.app/Contents/MacOS/chimera --stereo).

A simplier way to reproduce it, would be to use the Togl stereo demo from &lt;<http://togl.sourceforge.net/>&gt;. The Togl 2.0 source needs Tcl/Tk 8.4. Use the Togl CVS version if you have Tcl/Tk 8.\[56\]. Then in the stereo demo, switch in and out of the native (quad-buffered) stereo mode. Should crash quickly.



---

*gstaplin@…* commented *[on Feb 3, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:37 "February 3, 2009 at 8:54 PM PST")*

> It seems some part of Wine or libGL is calling a NULL pointer... What are all of the fixme comments to the left of the Wine problem output?

Regarding the Chimera/Togl issue, it seems the new libGL works better with the stereo demo for Togl. I can get the native stereo mode to work at least, but only if I use another mode before switching to it. I'll have to check, but I seem to recall a shared context issue might have been part of the problem.

Can you also try the libGL.dylib that Jeremy attached above with XQuartz 2.3.2.1?



---

*jimumbra@…* commented *[on Feb 3, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:38 "February 3, 2009 at 9:03 PM PST")*

I tried running with the attached library, it cleared up a few things, but still the same error... However then I realized I used a patch for my graphics months ago that downgraded the graphics drivers to support 256 color... everything works fine but I thought this could be the problem so I uninstalled those and in the process screwed something up horribly....

Basically I had to reinstall Mac OS X and I am still trying to retrieve some of my files. It will be at least a day until I give another go with Wine.. I will let you know whats up at that point.

Thank you guys... and if there is any easy way of making this work, just let me know.



---

*gregcouch@…* commented *[on Feb 4, 2009](https://xquartz.macosforge.org/trac/attachment/ticket/122/crash-x11-chimera-2.3.2.1.txt "February 4, 2009 at 1:18 PM PST")*

-   **Attachment** *[crash-x11-chimera-2.3.2.1.txt](../attachment/ticket/122/crash-x11-chimera-2.3.2.1.txt)* (23.3 KB) added

Apple bug report text when trying to switch into stereo



---

*gregcouch@…* commented *[on Feb 4, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:39 "February 4, 2009 at 1:34 PM PST")*

FYI, UCSF Chimera now crashes Xquartz 2.3.2.1 when trying to switch into stereo. The Apple bug report text is available in an attachment. Starting out in stereo work (from the Terminal, "Desktop/Chimera.app/Contents/MacOS/chimera --stereo").



---

*gstaplin@…* commented *[on Feb 4, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:40 "February 4, 2009 at 3:41 PM PST")*

That Chimera crash is odd. It seems to be using the indirect path for Chimera. The problem seems to be that a shared context has been specified that doesn't exist. Is Chimera trying to specify a shared context with indirect?

It's this path in the xserver/hw/xquartz/GL/indirect.c:
gl\_err = CGLCreateContext(context-&gt;pixelFormat,

> shareContext ? shareContext-&gt;ctx : NULL,
> &context-&gt;ctx);

IIRC cglContextValidQ is an internal CGL function that tests for a valid context. In this case the shareContext-&gt;ctx must be an invalid pointer, or points to something that has been freed.

Chimera worked before with --stereo, so I'm not sure what's gone wrong. Are you testing over remote indirect GLX? Does it work with direct GLX?



---

*gstaplin@…* commented *[on Feb 4, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:41 "February 4, 2009 at 5:37 PM PST")*

I just verified that Chimera works with --stereo in direct mode for me with 2.3.2.1 and the libGL based on the attachment from above, when started from a Terminal. Have there been some changes to Chimera since alpha version 1.3 build 2574?

I tested it by opening a sample, and using the mouse to rotate around an object. It seems to work fine. Do you by chance have LIBGL\_ALWAYS\_INDIRECT in you environment somehow? Do you have any LIBGL\_\* environment variables set? It still seems odd that it's using indirect, unless you're running OpenGL indirectly. I don't doubt there's a bug in the indirect code or xserver's GLX, I just want to make sure this works in direct mode.

Does glxinfo -v indicate that direct is available?



---

*gregcouch@…* commented *[on Feb 5, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:42 "February 5, 2009 at 1:20 PM PST")*

There have been no changes in the stereo code in UCSF Chimera since alpha vesrion 1.3 build 2574. There are no LIBGL\_\* environment variables set. glxinfo indicates that direct rendering is being used. I am able to reproduce the bug using a modified version of the Togl stereo.tcl demo (so no chimera, just Tcl/Tk and Togl). I'm attaching the modified script and the Apple but report text for the resulting X server crash.



---

*gregcouch@…* commented *[on Feb 5, 2009](https://xquartz.macosforge.org/trac/attachment/ticket/122/crash-x11-togl-2.3.2.1.txt "February 5, 2009 at 1:21 PM PST")*

-   **Attachment** *[crash-x11-togl-2.3.2.1.txt](../attachment/ticket/122/crash-x11-togl-2.3.2.1.txt)* (23.3 KB) added

Apple bug report text when trying to switch into native stereo with Togl stereo demo



---

*gstaplin@…* commented *[on Feb 5, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:43 "February 5, 2009 at 1:40 PM PST")*

Greg, I'm wondering now why Chimera works for me and not for you. Testing with the stereo.tcl demo I am able to duplicate the problem.

The problem seems to be with the -sharelist main code. I think I tried to revisit that code after our last email. I guess that Chimera doesn't do that in the version I have, or somehow that is configured differently between our 2 systems.

The error produced by the libGL is: "error: invalid share context" The X server crashes after that.

If I take out the -sharelist main it works fine. Shared display lists are something I'm not sure have ever worked correctly in the X11 libGL. It also appears that the Togl code is requesting a direct context, but for some reason indirect is being used. The X server's GLX code has known problems with shared indirect display lists (based on the comments in the code).

The new libGL used in the 2.4.0 alphas may fix the display lists. I will verify with the new libGL, and attempt to fix 2.3.2.1's old libGL if possible (again).



---

*gregcouch@…* commented *[on Feb 5, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:44 "February 5, 2009 at 4:53 PM PST")*

I don't why Chimera works for you either. :-).

FYI, Chimera shares display lists in lots of places, e.g., when adding/removing destination alpha, and it all works except for sharing with stereo visuals.

I can modify Togl's stereo.c to require shared displays to work, if you wish.



---

*gstaplin@…* commented *[on Feb 5, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:45 "February 5, 2009 at 10:34 PM PST")*

I think I know why Chimera works for me, and the Togl demo doesn't. It seems that CGL has a requirement that the shared context have a compatible pixel format object.

<http://developer.apple.com/documentation/graphicsimaging/reference/CGL_OpenGL/Reference/reference.html#//apple_ref/c/func/CGLCreateContext>
"With a multiple device rendering context, sharing is possible only when the relationship between the renderers and the graphics devices they support is the same for all rendering contexts that are shared. Normally you achieve the best display by using the same pixel format object for all shared rendering contexts."

Something odd I noticed today with the stereo.tcl when using -sharelist main. It seems that when I activate an invalid mode, such as the "sgioldstyle" and then activate native, it works. If I switch to other modes after that I get the abort and the error message, and the X11 crash.

So this works:

1.  start stereo.tcl
2.  select sgioldstyle
3.  select native

This fails:

1.  start stereo.tcl
2.  select sgioldstyle
3.  select native
4.  select left eye

Interestingly it seems that the context is valid. So the kCGLBadMatch error returned by CGLCreateContext() seems to be due to an incompatible pixel format object. So the GLX attributes will need to be the same or similar I suspect for the 2 or more contexts sharing display lists. This best explains the problem at the moment. I don't know of a way around this incompatibility between the OpenGL APIs.



---

*gregcouch@…* commented *[on Feb 6, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:46 "February 6, 2009 at 11:28 AM PST")*

I was expecting that glxCreateContext would return NULL when it couldn't share display lists, but upon rereading the GLX specification I see that not sharing is not an option if it is on the same screen. When Togl uses Aqua instead of X11, it can share display lists with stereo visuals just fine -- the pixel formats all have AGL\_ACCELERATED and AGL\_NO\_RECOVERY set.



---

*gregcouch@…* commented *[on Feb 9, 2009](https://xquartz.macosforge.org/trac/attachment/ticket/122/stereo.tcl "February 9, 2009 at 11:18 AM PST")*

-   **Attachment** *[stereo.tcl](../attachment/ticket/122/stereo.tcl)* (3.8 KB) added



---

*gregcouch@…* commented *[on Feb 9, 2009](https://xquartz.macosforge.org/trac/attachment/ticket/122/bad_alloc.txt "February 9, 2009 at 11:19 AM PST")*

-   **Attachment** *[bad\_alloc.txt](../attachment/ticket/122/bad_alloc.txt)* (443 bytes) added

non-fatal to X failure mode



---

*gregcouch@…* commented *[on Feb 9, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:47 "February 9, 2009 at 11:34 AM PST")*

I've replaced the stereo.tcl with one that should fail everytime you switch to native stereo (the previous code had a bug where it worked if you first got the error text, sgioldstyle, then failed when you switched out of stereo). I've also uploaded bad\_alloc.txt that shows that sometimes the X server gives a protocol error and kills the application instead of crashing itself. The CVS version of Togl should be able to recover from that failure mode, but I would prefer that the display lists were shareable with stereo visuals.



---

*jeremyhu@…* commented *[on Feb 25, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:48 "February 25, 2009 at 6:46 PM PST")*

-   **Status** changed from *reopened* to *closed*
-   **Milestone** changed from *2.3.2* to *2.3.3*
-   **Resolution** set to *fixed*

Try <http://static.macosforge.org/xquartz/downloads/X11-2.3.3_beta1.dmg>



---

*mastorak@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:49 "March 11, 2009 at 5:42 AM PDT")*

Replying to [jeremyhu@…](https://xquartz.macosforge.org/trac/ticket/122#comment:48):

> Try <http://static.macosforge.org/xquartz/downloads/X11-2.3.3_beta1.dmg>

I tried it with wine an half life 2 on a clean wine 1.1.16 Intel/Nvidia macbook pro 10.5.6
The error message

    rr:wgl:has_opengl  glx_version is 1.2 and GLX_SGIX_fbconfig extension is unsupported. Expect problems.

was not shown again but the game did not launch correctly. X11 window did not focus and i had to move the finder window over to render. After a few seconds later it crashed.
I thought you would like to know..



---

*jeremyhu@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:50 "March 11, 2009 at 8:33 AM PDT")*

Please update to 2.3.3-rc1 <http://static.macosforge.org/xquartz/downloads/X11-2.3.3-rc1.dmg>

mastorak: It looks like you're not using our libGL then. What does /usr/bin/glxinfo report? What version of wine are you using?



---

*mastorak@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:51 "March 11, 2009 at 9:17 AM PDT")*

Replying to [jeremyhu@…](https://xquartz.macosforge.org/trac/ticket/122#comment:50):

> Please update to 2.3.3-rc1 <http://static.macosforge.org/xquartz/downloads/X11-2.3.3-rc1.dmg>
>
> mastorak: It looks like you're not using our libGL then. What does /usr/bin/glxinfo report? What version of wine are you using?

I 'll try with the new package tonight and report back.
Unfortunately I reinstalled the previous stable after trying so I do not know what glxinfo would report. The wine version is 1.1.16 from macports(package wine-devel).
I 'll install the rc1 build and then rebuild wine and test again.
I tested with Half-life 2 retail since it is a Platinum Game for wine and works flawlessly on Linux with wine.



---

*mastorak@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:52 "March 11, 2009 at 6:09 PM PDT")*

I installed the rc1 version and after that i build again wine 1.1.16.
In the new clean environmentn I installed Half life 2. The outcome was the same as before:
Application launches.Screen becomes white with X11 window out of focus on the background with dock and top bar being on top of everything. Moving a finder window around reveals the initial valve logo screen. Application crashes after a few seconds

A guy named rwoodsmall, on the wine forums, said this on the matter

    The Xquartz 2.3.3 RC (http://static.macosforge.org/xquartz/downloads/X11-2.3.3_rc1.dmg) does indeed have working OpenGL support with Wine. However, it looks to require an explicit workaround and recompile to enforce one of the GLX code paths in dlls/winex11.drv/opengl.c

here is the wine output from start to finish of launching the application

    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    fixme:advapi:SetEntriesInAclA 1 0x33f7dc 0x0 0x33f814
    fixme:advapi:SetSecurityInfo stub
    fixme:advapi:SetEntriesInAclA 1 0x33f7c8 0x0 0x33f810
    fixme:advapi:SetSecurityInfo stub
    fixme:advapi:SetEntriesInAclA 1 0x33f7e8 0x0 0x33f830
    fixme:advapi:SetSecurityInfo stub
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    fixme:system:SetProcessDPIAware stub!
    fixme:dwmapi:DwmIsCompositionEnabled 0x33e924
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    fixme:iphlpapi:NotifyAddrChange (Handle 0xe0f488, overlapped 0xe0f490): stub
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\freebl3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\js3250.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\nspr4.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\nss3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\nssckbi.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\nssdbm3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\nssutil3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\plc4.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\plds4.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\plugins\npnul32.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\smime3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\softokn3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\sqlite3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\ssl3.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\xpcom.dll") - Symbol NSGetModule not found
    0[20c4c8]: nsNativeModuleLoader::LoadModule("C:\windows\gecko\0.9.1\wine_gecko\xul.dll") - Symbol NSGetModule not found
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:rundll32:WinMain Unable to load L"streamci"
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:ntdll:RtlpWaitForCriticalSection section 0x7bc8d3a4 "loader.c: loader_section" wait timed out in thread 0015, blocked by 0039, retrying (60 sec)
    err:ntdll:RtlpWaitForCriticalSection section 0x7bc8d3a4 "loader.c: loader_section" wait timed out in thread 0010, blocked by 0039, retrying (60 sec)
    CellID: Fetching server list from CSDS. . .
    fixme:process:SetProcessShutdownParameters (00000100, 00000000): partial stub.
    fixme:urlmon:CoInternetSetFeatureEnabled 5, 0x00000002, 1, stub
    fixme:urlmon:CoInternetSetFeatureEnabled 10, 0x00000002, 1, stub
    CellID: CSDS returned 149 servers.
    CellID: Connecting to 208.111.182.251:27031. . .
    CellID: Connect to 208.111.182.251:27031 took 166 MS
    CellID: Nothing beat our old best time of 63 MS
    fixme:wave:widDsCreate DirectSoundCapture not implemented
    fixme:wave:widDsCreate The (slower) DirectSound HEL mode will be used instead.
    fixme:mixer:MIX_GetLineInfo MIXER_GETLINEINFOF_SOURCE 0 dst=0
    fixme:mixer:MIX_GetLineInfo MIXER_GETLINEINFOF_SOURCE 0 dst=1
    fixme:mixer:MIX_GetLineInfo MIXER_GETLINEINFOF_SOURCE 0 dst=2
    err:ntdll:RtlpWaitForCriticalSection section 0xce6b74 "?" wait timed out in thread 0016, blocked by 0011, retrying (60 sec)
    err:ole:CoGetClassObject class {4590f811-1d3a-11d0-891f-00aa004b2e24} not registered
    err:ole:CoGetClassObject no class object {4590f811-1d3a-11d0-891f-00aa004b2e24} could be created for context 0x1
    fixme:shdocvw:ViewObject_SetAdvise (0x326c608)->(1 00000002 0x1e83f50)
    fixme:shdocvw:PersistStreamInit_InitNew (0x326c608)
    fixme:shdocvw:WebBrowser_put_RegisterAsBrowser (0x326c608)->(ffffffff)
    fixme:shdocvw:WebBrowser_put_RegisterAsDropTarget (0x326c608)->(ffffffff)
    fixme:shdocvw:ViewObject_SetAdvise (0x326f618)->(1 00000002 0x1e84178)
    fixme:shdocvw:PersistStreamInit_InitNew (0x326f618)
    fixme:shdocvw:WebBrowser_put_RegisterAsBrowser (0x326f618)->(ffffffff)
    fixme:shdocvw:WebBrowser_put_RegisterAsDropTarget (0x326f618)->(ffffffff)
    fixme:win:RegisterDeviceNotificationA (hwnd=0x1008e, filter=0x33e0c8,flags=0x00000004),
        returns a fake device notification handle!
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:ole:CoGetClassObject class {9a5ea990-3034-4d6f-9128-01f3c61022bc} not registered
    err:ole:CoGetClassObject no class object {9a5ea990-3034-4d6f-9128-01f3c61022bc} could be created for context 0x1
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:d3d_caps:IWineD3DImpl_FillGLCaps Invalid nVidia version string: "2.0 NVIDIA-1.5.36"
    fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
    fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers
    fixme:win:EnumDisplayDevicesW ((null),0,0x33ce58,0x00000000), stub!
    err:d3d:getColorBits Unsupported format: WINED3DFMT_R16G16B16A16_FLOAT
    fixme:shdocvw:ViewObject_SetAdvise (0x32c8290)->(1 00000002 0x1e8e398)
    fixme:shdocvw:PersistStreamInit_InitNew (0x32c8290)
    fixme:shdocvw:WebBrowser_put_RegisterAsBrowser (0x32c8290)->(ffffffff)
    fixme:shdocvw:WebBrowser_put_RegisterAsDropTarget (0x32c8290)->(ffffffff)
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    fixme:shdocvw:OleInPlaceObject_InPlaceDeactivate (0x32c8290)
    fixme:shdocvw:OleInPlaceObject_UIDeactivate (0x32c8290)
    fixme:shdocvw:OleObject_Close (0x32c8290)->(1)
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    err:d3d_caps:IWineD3DImpl_FillGLCaps Invalid nVidia version string: "2.0 NVIDIA-1.5.36"
    fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
    fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers
    fixme:win:EnumDisplayDevicesW ((null),0,0x33e058,0x00000000), stub!
    err:d3d:getColorBits Unsupported format: WINED3DFMT_R16G16B16A16_FLOAT
    fixme:keyboard:X11DRV_LoadKeyboardLayout L"00000409", 0000: stub!
    err:d3d:getColorBits Unsupported format: WINED3DFMT_R16G16B16A16_FLOAT
    err:d3d:getColorBits Unsupported format: WINED3DFMT_R16G16B16A16_FLOAT
    err:d3d:getColorBits Unsupported format: WINED3DFMT_R32_FLOAT
    err:d3d:getColorBits Unsupported format: WINED3DFMT_R32G32B32A32_FLOAT
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glBindTexture @ surface.c / 2387
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE) @ surface.c / 2389
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE) @ surface.c / 2391
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE) @ surface.c / 2393
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_MIN_FILTER, GL_NEAREST) @ surface.c / 2395
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_MAG_FILTER, GL_NEAREST) @ surface.c / 2397
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glBindTexture @ surface.c / 2406
    fixme:d3d_surface:surface_allocate_surface >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexImage2D @ surface.c / 408
    fixme:d3d_surface:read_from_framebuffer_texture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glCopyTexSubImage2D @ surface.c / 1037
    fixme:d3d:IWineD3DDeviceImpl_EvictManagedResources (0x16e968) : stub

    babylon:~ mastorak$ fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glBindTexture @ surface.c / 2387
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE) @ surface.c / 2389
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE) @ surface.c / 2391
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE) @ surface.c / 2393
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_MIN_FILTER, GL_NEAREST) @ surface.c / 2395
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_MAG_FILTER, GL_NEAREST) @ surface.c / 2397
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glBindTexture @ surface.c / 2406
    fixme:d3d_surface:surface_allocate_surface >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexImage2D @ surface.c / 408
    fixme:d3d_surface:read_from_framebuffer_texture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glCopyTexSubImage2D @ surface.c / 1037
    fixme:d3d:IWineD3DDeviceImpl_EvictManagedResources (0x16e968) : stub
    fixme:font:WineEngAddFontResourceEx Ignoring flags 10
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e308 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x10c2cad8) : pBox=0x33e35c stub
    fixme:d3d:IWineD3DDeviceImpl_EvictManagedResources (0x16e968) : stub
    fixme:font:WineEngAddFontResourceEx Ignoring flags 10
    fixme:font:WineEngAddFontResourceEx Ignoring flags 10
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glBindTexture @ surface.c / 2387
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE) @ surface.c / 2389
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE) @ surface.c / 2391
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE) @ surface.c / 2393
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_MIN_FILTER, GL_NEAREST) @ surface.c / 2395
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexParameteri(dimension, GL_TEXTURE_MAG_FILTER, GL_NEAREST) @ surface.c / 2397
    fixme:d3d_surface:IWineD3DSurfaceImpl_BindTexture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glBindTexture @ surface.c / 2406
    fixme:d3d_surface:surface_allocate_surface >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glTexImage2D @ surface.c / 408
    fixme:d3d_surface:read_from_framebuffer_texture >>>>>>>>>>>>>>>>> GL_INVALID_ENUM (0x500) from glCopyTexSubImage2D @ surface.c / 1037
    fixme:d3d:IWineD3DDeviceImpl_EvictManagedResources (0x16e968) : stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:d3d_surface:IWineD3DVolumeImpl_LockBox (0x100ce1c8) : pBox=0x33e384 stub
    fixme:wave:wodDsCreate DirectSound not implemented
    fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
    fixme:wave:wodDsCreate DirectSound not implemented
    fixme:wave:wodDsCreate The (slower) DirectSound HEL mode will be used instead.
    fixme:d3d_draw:drawStridedFast >>>>>>>>>>>>>>>>> GL_INVALID_OPERATION (0x502) from glDrawElements @ drawprim.c / 276
    fixme:d3d_draw:drawStridedFast >>>>>>>>>>>>>>>>> GL_INVALID_OPERATION (0x502) from glDrawElements @ drawprim.c / 276
    fixme:d3d_draw:drawStridedFast >>>>>>>>>>>>>>>>> GL_INVALID_OPERATION (0x502) from glDrawElements @ drawprim.c / 276
    fixme:font:WineEngRemoveFontResourceEx :stub
    fixme:font:WineEngRemoveFontResourceEx :stub
    fixme:avifile:AVIFileExit (): stub!
    fixme:winmm:MMDRV_Exit Closing while ll-driver open

In addition here is the first part of glxinfo as requested before

    name of display: /tmp/launch-cS1OgT/:0
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    Xlib:  extension "Generic Event Extension" missing on display "/tmp/launch-cS1OgT/:0".
    display: /tmp/launch-cS1OgT/:0  screen: 0
    direct rendering: Yes
    server glx vendor string: SGI
    server glx version string: 1.2
    server glx extensions:
        GLX_ARB_multisample, GLX_EXT_visual_info, GLX_EXT_visual_rating, 
        GLX_EXT_import_context, GLX_EXT_texture_from_pixmap, GLX_OML_swap_method, 
        GLX_SGI_make_current_read, GLX_SGIX_fbconfig, GLX_MESA_copy_sub_buffer
    client glx vendor string: SGI
    client glx version string: 1.4
    client glx extensions:
        GLX_ARB_get_proc_address, GLX_ARB_multisample, GLX_EXT_import_context, 
        GLX_EXT_visual_info, GLX_EXT_visual_rating, GLX_MESA_allocate_memory, 
        GLX_MESA_copy_sub_buffer, GLX_MESA_swap_control, 
        GLX_MESA_swap_frame_usage, GLX_OML_swap_method, GLX_OML_sync_control, 
        GLX_SGI_make_current_read, GLX_SGI_swap_control, GLX_SGI_video_sync, 
        GLX_SGIS_multisample, GLX_SGIX_fbconfig, GLX_SGIX_pbuffer, 
        GLX_SGIX_visual_select_group, GLX_EXT_texture_from_pixmap
    GLX version: 1.4
    GLX extensions:
        GLX_ARB_get_proc_address
    OpenGL vendor string: NVIDIA Corporation
    OpenGL renderer string: NVIDIA GeForce 8600M GT OpenGL Engine
    OpenGL version string: 2.0 NVIDIA-1.5.36
    OpenGL shading language version string: 1.20
    OpenGL extensions:
        GL_ARB_transpose_matrix, GL_ARB_vertex_program, GL_ARB_vertex_blend, 
        GL_ARB_window_pos, GL_ARB_shader_objects, GL_ARB_vertex_shader, 
        GL_ARB_shading_language_100, GL_EXT_multi_draw_arrays, 
        GL_EXT_clip_volume_hint, GL_EXT_rescale_normal, 
        GL_EXT_draw_range_elements, GL_EXT_fog_coord, 
        GL_EXT_gpu_program_parameters, GL_EXT_geometry_shader4, 
        GL_EXT_transform_feedback, GL_APPLE_client_storage, 
        GL_APPLE_specular_vector, GL_APPLE_transform_hint, GL_APPLE_packed_pixels, 
        GL_APPLE_fence, GL_APPLE_vertex_array_object, 
        GL_APPLE_vertex_program_evaluators, GL_APPLE_element_array, 
        GL_APPLE_flush_render, GL_APPLE_aux_depth_stencil, 
        GL_NV_texgen_reflection, GL_NV_light_max_exponent, GL_IBM_rasterpos_clip, 
        GL_SGIS_generate_mipmap, GL_ARB_imaging, GL_ARB_point_parameters, 
        GL_ARB_texture_env_crossbar, GL_ARB_texture_border_clamp, 
        GL_ARB_multitexture, GL_ARB_texture_env_add, GL_ARB_texture_cube_map, 
        GL_ARB_texture_env_dot3, GL_ARB_multisample, GL_ARB_texture_env_combine, 
        GL_ARB_texture_compression, GL_ARB_texture_mirrored_repeat, GL_ARB_shadow, 
        GL_ARB_depth_texture, GL_ARB_fragment_program, 
        GL_ARB_fragment_program_shadow, GL_ARB_fragment_shader, 
        GL_ARB_occlusion_query, GL_ARB_point_sprite, 
        GL_ARB_texture_non_power_of_two, GL_ARB_vertex_buffer_object, 
        GL_ARB_pixel_buffer_object, GL_ARB_draw_buffers, 
        GL_ARB_shader_texture_lod, GL_EXT_compiled_vertex_array, 
        GL_EXT_framebuffer_object, GL_EXT_framebuffer_blit, 
        GL_EXT_framebuffer_multisample, GL_EXT_texture_rectangle, 
        GL_ARB_texture_rectangle, GL_EXT_texture_env_add, GL_EXT_blend_color, 
        GL_EXT_blend_minmax, GL_EXT_blend_subtract, GL_EXT_texture_lod_bias, 
        GL_EXT_abgr, GL_EXT_bgra, GL_EXT_stencil_wrap, 
        GL_EXT_texture_filter_anisotropic, GL_EXT_secondary_color, 
        GL_EXT_blend_func_separate, GL_EXT_shadow_funcs, GL_EXT_stencil_two_side, 
        GL_EXT_depth_bounds_test, GL_EXT_texture_compression_s3tc, 
        GL_EXT_texture_compression_dxt1, GL_EXT_texture_sRGB, 
        GL_EXT_blend_equation_separate, GL_EXT_texture_mirror_clamp, 
        GL_EXT_packed_depth_stencil, GL_EXT_bindable_uniform, 
        GL_EXT_texture_integer, GL_EXT_gpu_shader4, GL_EXT_draw_buffers2, 
        GL_APPLE_flush_buffer_range, GL_APPLE_ycbcr_422, 
        GL_APPLE_vertex_array_range, GL_APPLE_texture_range, 
        GL_APPLE_float_pixels, GL_ATI_texture_float, GL_ARB_texture_float, 
        GL_ARB_half_float_pixel, GL_APPLE_pixel_buffer, GL_APPLE_object_purgeable, 
        GL_NV_point_sprite, GL_NV_register_combiners, GL_NV_register_combiners2, 
        GL_NV_blend_square, GL_NV_texture_shader, GL_NV_texture_shader2, 
        GL_NV_texture_shader3, GL_NV_fog_distance, GL_NV_depth_clamp, 
        GL_NV_multisample_filter_hint, GL_NV_fragment_program_option, 
        GL_NV_fragment_program2, GL_NV_vertex_program2_option, 
        GL_NV_vertex_program3, GL_ATI_texture_mirror_once, 
        GL_ATI_texture_env_combine3, GL_ATI_separate_stencil, 
        GL_SGIS_texture_edge_clamp, GL_SGIS_texture_lod



---

*gstaplin@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:53 "March 11, 2009 at 7:28 PM PDT")*

-   **Status** changed from *closed* to *reopened*
-   **Resolution** *fixed* deleted

I emailed mastorak@ about this issue. I think I may need to learn more about what Wine is doing, and how to even use Wine on a Mac to fix this. It seems that part of the problem is that Wine is passing invalid values to glDrawElements, and similar OpenGL functions. Perhaps it's assuming that an extension exists, that doesn't really, or there is another bug.

Can any of you suggest a good Wine developer to contact regarding issues like this?



---

*jeremyhu@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:54 "March 11, 2009 at 8:23 PM PDT")*

-   **Summary** changed from *GLX: support fbconfig* to *GLX: wine doesn't play ball*

Replying to [mastorak@…](https://xquartz.macosforge.org/trac/ticket/122#comment:52):

> I installed the rc1 version and after that i build again wine 1.1.16.
> In the new clean environmentn I installed Half life 2. The outcome was the same as before:
> Application launches.Screen becomes white with X11 window out of focus on the background with dock and top bar being on top of everything. Moving a finder window around reveals the initial valve logo screen. Application crashes after a few seconds
>
> A guy named rwoodsmall, on the wine forums, said this on the matter
>
>     The Xquartz 2.3.3 RC (http://static.macosforge.org/xquartz/downloads/X11-2.3.3_rc1.dmg) does indeed have working OpenGL support with Wine. However, it looks to require an explicit workaround and recompile to enforce one of the GLX code paths in dlls/winex11.drv/opengl.c

I'm not sure what his specific issue with respect to this recompile is, but I'm guessing it is actually wrt MacPorts. I spent a great deal of effort updating the X11 environment in MacPorts, and part of that was adding our new libGL to MacPorts. Currently, Macports includes version 52 (I think) of AppleSGLX. 2.3.3-rc1 includes 54 (I think). When you compile wine in macports, you're actually using the MacPorts version of libGL (from the mesa port). The other user's note about "recompiling" wine was probably motivated by his experience "recompiling" which actually caused the mesa port to be updated as well.

For installing wine, I would recommend:

    1) Install MacPorts
    2) Update macports ports by running: "sudo port -v selfupdate"
    3) Install the development branch of wine by running: "sudo port -v install wine-devel"

Ken (<ken@codeweavers.com>) and Stefan (<stefan@codeweavers.com>) are your best bets for wine related issues. Ken is my general go-to guy for wine in general, and Stefan knows the GL guts. Ken referred me to him back in February when I was debugging another GLX/wine issue.

This also might have something to do with display lists or multiple contexts.



---

*jeremyhu@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:55 "March 11, 2009 at 8:51 PM PDT")*

mastorak: Is this specific to the retail version of HL2? I'm hoping and assuming not, but could you please verify that it happens with something we can obtain freely (like the free trial of HL2 or something similar?)

Also, for those not very wine-savvy (me), can you please give a quick walkthrough of installing the HL2 demo version? I'm downloading it from [cnet](http://download.cnet.com/Half-Life-2-demo/3000-7441_4-10349536.html) right now... but I'm a bit affraid that Steam will complicate the process. My main experience with wine has been with Transgaming or Codeweavers for "big" packages like HalfLife. I've only used the vanilla version of wine for toy tests like minesweeper and such.

I think I have some old windows 3d benchmark suites. I'll try those out as well...



---

*jeremyhu@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:56 "March 11, 2009 at 9:13 PM PDT")*

Ok, so I think there is a problem with the version of libGL in MacPorts. I'm having some issues with it, but you can force the /usr/X11/lib/libGL.dylib by doing:

DYLD\_FALLBACK\_LIBRARY\_PATH="/usr/X11/lib:/opt/local/lib" /opt/local/libexec/wine/wine ./3DMark2000.exe

(or whatever exe you want to run... I'm obviously trying out some benchmarking suites). I'm uploading these to a server, so you can download them, George.



---

*jeremyhu@…* commented *[on Mar 11, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:57 "March 11, 2009 at 9:55 PM PDT")*

Some interesting discoveries with 3DMark2000. Forcing software rendering gets fairly good images (at poor speeds of course). Turning on HW rendering results in some failure in texture mapping (meaning there is none, it seems). It's mostly a black render with some lighting on a flat ground plane and black cutouts where other textures should be. Note that I don't see any visual id dumped despite LIBGL\_DUMP\_VISUALID=1

env LIBGL\_DUMP\_VISUALID=1 LIBGL\_ALWAYS\_HARDWARE=1 DYLD\_FALLBACK\_LIBRARY\_PATH="/usr/X11/lib:/opt/local/lib" /opt/local/libexec/wine/wine ./3DMark2000.exe

    libGL: Hardware rendering forced.
    libGL: Hardware rendering forced.
    err:d3d_caps:IWineD3DImpl_FillGLCaps Invalid nVidia version string: "2.0 NVIDIA-1.5.36"
    fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
    fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers
    fixme:win:EnumDisplayDevicesW ((null),0,0x32eb9c,0x00000000), stub!
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Hardware rendering forced.
    err:ddraw:PixelFormat_DD2WineD3D 16 bit RGB Pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D 32 bit RGB pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D Invalid dwRGBBitCount in Pixelformat structure
    fixme:win:LockWindowUpdate (0x20028), partial stub!
    fixme:win:LockWindowUpdate (0x0), partial stub!
    fixme:d3d:IWineD3DDeviceImpl_CreateAdditionalSwapChain The app requests more than one back buffer, this can't be supported properly. Please configure the application to use double buffering(=1 back buffer) if possible
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Hardware rendering forced.

env LIBGL\_DUMP\_VISUALID=1 LIBGL\_ALWAYS\_SOFTWARE=1 DYLD\_FALLBACK\_LIBRARY\_PATH="/usr/X11/lib:/opt/local/lib" /opt/local/libexec/wine/wine ./3DMark2000.exe

    fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
    fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers
    fixme:win:EnumDisplayDevicesW ((null),0,0x32eb9c,0x00000000), stub!
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Software rendering forced.
    err:ddraw:PixelFormat_DD2WineD3D 16 bit RGB Pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D 32 bit RGB pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D Invalid dwRGBBitCount in Pixelformat structure
    fixme:win:LockWindowUpdate (0x20028), partial stub!
    fixme:win:LockWindowUpdate (0x0), partial stub!
    fixme:d3d:IWineD3DDeviceImpl_CreateAdditionalSwapChain The app requests more than one back buffer, this can't be supported properly. Please configure the application to use double buffering(=1 back buffer) if possible
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Software rendering forced.

Turning on DIAG shows a bunch of (for forced software):

    WARNING: unknown GLX tag from server: tag 0xb01a8e04 value 0x1106b5
    WARNING: unknown GLX tag from server: tag 0x1048d7a0 value 0x0
    WARNING: unknown GLX tag from server: tag 0xb01a8e04 value 0x4f0340
    WARNING: unknown GLX tag from server: tag 0xb01a8e04 value 0x1106b5
    WARNING: unknown GLX tag from server: tag 0x1048d7a0 value 0x0
    WARNING: unknown GLX tag from server: tag 0xb01a8e04 value 0x4f0340
    WARNING: unknown GLX tag from server: tag 0xb01a8e04 value 0x1106b5
    ...
    ibGL: Software rendering forced.
    DIAG: apple_glx_create_context: ac 0x602a9370 ac->context_obj 0x6083e000
    DIAG: apple_glx_drawable_create: new drawable 0x60859200
    DIAG: create_surface: created a surface for drawable 0x1fd with uid 241
    DIAG: surface_make_current: ac->context_obj 0x6083e000 s->surface_id 5
    DIAG: surface_make_current: drawable 0x1fd
    DIAG: destroy_drawable_callback: 0x60859200 ->reference_count before -- 1
    DIAG: surface_destroy: s->surface_id 5
    DIAG: surface_destroy: destroyed a surface for drawable 0x1fd uid 241
    DIAG: destroy_drawable: freeing 0x60859200
    DIAG: apple_glx_destroy_context: ac 0x602a9370 ac->context_obj 0x6083e000
    DIAG: surface_notify_handler: surface destroyed 241
    libGL: Software rendering forced.
    DIAG: apple_glx_create_context: ac 0x6cc1a550 ac->context_obj 0x6083e000
    DIAG: apple_glx_drawable_create: new drawable 0x6085b600
    DIAG: create_surface: created a surface for drawable 0x1000008 with uid 249
    DIAG: surface_make_current: ac->context_obj 0x6083e000 s->surface_id 9
    DIAG: surface_make_current: drawable 0x1000008
    fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
    fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers
    fixme:win:EnumDisplayDevicesW ((null),0,0x32eb9c,0x00000000), stub!
    DIAG: destroy_drawable_callback: 0x6085b600 ->reference_count before -- 1
    DIAG: surface_destroy: s->surface_id 9
    DIAG: surface_destroy: destroyed a surface for drawable 0x1000008 uid 249
    DIAG: destroy_drawable: freeing 0x6085b600
    DIAG: apple_glx_destroy_context: ac 0x6cc1a550 ac->context_obj 0x6083e000
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Software rendering forced.
    DIAG: apple_glx_create_context: ac 0x6cc1a630 ac->context_obj 0x6083e000
    DIAG: apple_glx_drawable_create: new drawable 0x6085b600
    DIAG: surface_notify_handler: surface destroyed 249
    DIAG: create_surface: created a surface for drawable 0x100000d with uid 257
    DIAG: surface_make_current: ac->context_obj 0x6083e000 s->surface_id 13
    DIAG: surface_make_current: drawable 0x100000d
    DIAG: destroy_drawable_callback: 0x6085b600 ->reference_count before -- 1
    DIAG: surface_destroy: s->surface_id 13
    DIAG: surface_destroy: destroyed a surface for drawable 0x100000d uid 257
    DIAG: destroy_drawable: freeing 0x6085b600
    DIAG: apple_glx_destroy_context: ac 0x6cc1a630 ac->context_obj 0x6083e000
    err:ddraw:PixelFormat_DD2WineD3D 16 bit RGB Pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D 32 bit RGB pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D Invalid dwRGBBitCount in Pixelformat structure
    DIAG: surface_notify_handler: surface destroyed 257
    fixme:win:LockWindowUpdate (0x20028), partial stub!
    fixme:win:LockWindowUpdate (0x0), partial stub!
    fixme:d3d:IWineD3DDeviceImpl_CreateAdditionalSwapChain The app requests more than one back buffer, this can't be supported properly. Please configure the application to use double buffering(=1 back buffer) if possible
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Software rendering forced.
    DIAG: apple_glx_create_context: ac 0x6cc1e280 ac->context_obj 0x60856c00
    DIAG: apple_glx_drawable_create: new drawable 0x6086c000
    DIAG: create_surface: created a surface for drawable 0x1000023 with uid 285
    DIAG: surface_make_current: ac->context_obj 0x60856c00 s->surface_id 17
    DIAG: surface_make_current: drawable 0x1000023
    ...
    DIAG: destroy_drawable_callback: 0x6086c000 ->reference_count before -- 1
    DIAG: surface_destroy: s->surface_id 17
    DIAG: surface_destroy: destroyed a surface for drawable 0x1000023 uid 285
    DIAG: destroy_drawable: freeing 0x6086c000
    DIAG: apple_glx_destroy_context: ac 0x6cc1e280 ac->context_obj 0x60856c00
    DIAG: surface notify updated 0
    DIAG: surface notify updated 0
    DIAG: surface_notify_handler: surface destroyed 285

similar for HW rendering...

    libGL: Hardware rendering forced.
    DIAG: apple_glx_create_context: ac 0x602a9370 ac->context_obj 0x6083e000
    DIAG: apple_glx_drawable_create: new drawable 0x60882800
    DIAG: create_surface: created a surface for drawable 0x1fd with uid 301
    DIAG: surface_make_current: ac->context_obj 0x6083e000 s->surface_id 5
    DIAG: surface_make_current: drawable 0x1fd
    DIAG: destroy_drawable_callback: 0x60882800 ->reference_count before -- 1
    DIAG: surface_destroy: s->surface_id 5
    DIAG: surface_destroy: destroyed a surface for drawable 0x1fd uid 301
    DIAG: destroy_drawable: freeing 0x60882800
    DIAG: apple_glx_destroy_context: ac 0x602a9370 ac->context_obj 0x6083e000
    DIAG: surface_notify_handler: surface destroyed 301
    libGL: Hardware rendering forced.
    DIAG: apple_glx_create_context: ac 0x602ea400 ac->context_obj 0x6083e000
    DIAG: apple_glx_drawable_create: new drawable 0x60882800
    DIAG: create_surface: created a surface for drawable 0x1000008 with uid 309
    DIAG: surface_make_current: ac->context_obj 0x6083e000 s->surface_id 9
    DIAG: surface_make_current: drawable 0x1000008
    err:d3d_caps:IWineD3DImpl_FillGLCaps Invalid nVidia version string: "2.0 NVIDIA-1.5.36"
    fixme:d3d:IWineD3DImpl_FillGLCaps OpenGL implementation supports 16 vertex samplers and 16 total samplers
    fixme:d3d:IWineD3DImpl_FillGLCaps Expected vertex samplers + MAX_TEXTURES(=8) > combined_samplers
    fixme:win:EnumDisplayDevicesW ((null),0,0x32eb9c,0x00000000), stub!
    DIAG: destroy_drawable_callback: 0x60882800 ->reference_count before -- 1
    DIAG: surface_destroy: s->surface_id 9
    DIAG: surface_destroy: destroyed a surface for drawable 0x1000008 uid 309
    DIAG: destroy_drawable: freeing 0x60882800
    DIAG: apple_glx_destroy_context: ac 0x602ea400 ac->context_obj 0x6083e000
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Hardware rendering forced.
    DIAG: apple_glx_create_context: ac 0x602ea400 ac->context_obj 0x6083e000
    DIAG: apple_glx_drawable_create: new drawable 0x60885200
    DIAG: surface_notify_handler: surface destroyed 309
    DIAG: create_surface: created a surface for drawable 0x100000d with uid 317
    DIAG: surface_make_current: ac->context_obj 0x6083e000 s->surface_id 13
    DIAG: surface_make_current: drawable 0x100000d
    DIAG: destroy_drawable_callback: 0x60885200 ->reference_count before -- 1
    DIAG: surface_destroy: s->surface_id 13
    DIAG: surface_destroy: destroyed a surface for drawable 0x100000d uid 317
    DIAG: destroy_drawable: freeing 0x60885200
    DIAG: apple_glx_destroy_context: ac 0x602ea400 ac->context_obj 0x6083e000
    err:ddraw:PixelFormat_DD2WineD3D 16 bit RGB Pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D 32 bit RGB pixel format does not match
    err:ddraw:PixelFormat_DD2WineD3D Invalid dwRGBBitCount in Pixelformat structure
    DIAG: surface_notify_handler: surface destroyed 317
    fixme:win:LockWindowUpdate (0x20028), partial stub!
    fixme:win:LockWindowUpdate (0x0), partial stub!
    fixme:d3d:IWineD3DDeviceImpl_CreateAdditionalSwapChain The app requests more than one back buffer, this can't be supported properly. Please configure the application to use double buffering(=1 back buffer) if possible
    fixme:d3d:WineD3D_ChoosePixelFormat Add OpenGL context recreation support to SetDepthStencilSurface
    libGL: Hardware rendering forced.
    DIAG: apple_glx_create_context: ac 0x6ce1efd0 ac->context_obj 0x60857800
    DIAG: apple_glx_drawable_create: new drawable 0x60895400
    DIAG: create_surface: created a surface for drawable 0x1000023 with uid 345
    DIAG: surface_make_current: ac->context_obj 0x60857800 s->surface_id 17
    DIAG: surface_make_current: drawable 0x1000023


---

*mastorak@…* commented *[on Mar 12, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:58 "March 12, 2009 at 5:14 AM PDT")*

I am afraid the version that I am using is the Half-Life 2 retail (32 bit) version. Don't worry about steam as it doesn't have any problems with wine. The only extra that you might be needing to install is the gecko engine and the fontfix(easily done from winetricks).

rwoodsmall on wine forums
suggested the following patch for wine in order to play along

    --- dlls/winex11.drv/opengl.c   2009-03-11 21:45:29.000000000 -0500
    +++ dlls/winex11.drv/opengl.c   2009-03-11 21:46:56.000000000 -0500
    @@ -478,12 +478,14 @@
          * the ATI drivers and from then on use GLX client information for them.
          */
     
    +#ifndef __APPLE__
         if(glxRequireVersion(3)) {
             pglXChooseFBConfig = pglXGetProcAddressARB((const GLubyte *) "glXChooseFBConfig");
             pglXGetFBConfigAttrib = pglXGetProcAddressARB((const GLubyte *) "glXGetFBConfigAttrib");
             pglXGetVisualFromFBConfig = pglXGetProcAddressARB((const GLubyte *) "glXGetVisualFromFBConfig");
             pglXQueryDrawable = pglXGetProcAddressARB((const GLubyte *) "glXQueryDrawable");
         } else if(glxRequireExtension("GLX_SGIX_fbconfig")) {
    +#endif
             pglXChooseFBConfig = pglXGetProcAddressARB((const GLubyte *) "glXChooseFBConfigSGIX");
             pglXGetFBConfigAttrib = pglXGetProcAddressARB((const GLubyte *) "glXGetFBConfigAttribSGIX");
             pglXGetVisualFromFBConfig = pglXGetProcAddressARB((const GLubyte *) "glXGetVisualFromFBConfigSGIX");
    @@ -492,6 +494,7 @@
              * enable this function when the Xserver understand GLX 1.3 or newer
              */
             pglXQueryDrawable = NULL;
    +#ifndef __APPLE__
          } else if(strcmp("ATI", WineGLInfo.glxClientVendor) == 0) {
             TRACE("Overriding ATI GLX capabilities!\n");
             pglXChooseFBConfig = pglXGetProcAddressARB((const GLubyte *) "glXChooseFBConfig");
    @@ -507,6 +510,7 @@
         } else {
              ERR(" glx_version is %s and GLX_SGIX_fbconfig extension is unsupported. Expect problems.\n", WineGLInfo.glxServerVersion);
         }
    +#endif
     
         if(glxRequireExtension("GLX_ATI_render_texture")) {
             use_render_texture_ati = 1; 


---

*mastorak@…* commented *[on Mar 12, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:59 "March 12, 2009 at 6:03 AM PDT")*

Jeremy: I forgot to mention that this problem is not specific to hl2 retail but on anything i tried so far.
hl2 demo will do just fine as a freeware that you can use for your tests.



---

*jeremyhu@…* commented *[on Mar 12, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:60 "March 12, 2009 at 9:59 AM PDT")*

That patch to wine would be needed for the old libGL, but not with the new libGL.

The HL2 demo finished downloading, and I also passed along a bunch of 3d benchmarking suites to George. It will be challenging to find out what is wine's fault and what is libGL's. Fortunately, we have linux as another point of comparison to see what works there with wine.



---

*rwoodsmall@…* commented *[on Mar 13, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:61 "March 13, 2009 at 10:56 AM PDT")*

-   **Cc** *rwoodsmall@…* added



---

*rwoodsmall@…* commented *[on Mar 13, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:62 "March 13, 2009 at 11:07 AM PDT")*

Jeremy, George, et al:

I'm the rwoodsmall on the Wine forums too... Using the "glxRequireVersion(3)" code path in Wine with games installed through Steam generally results in a black screen for me, no games running, etc. Forcing the SGIX\_fbconfig shows much better behavior. I'm Linux, OS X, X11 and Wine savvy, know enough C/C++ and OpenGL to be dangerous, and have much experience building X (vanilla Xorg & Xquartz) and Wine from source. The CodeWeavers "CrossOver Games" source includes their customized Wine sources, and there are some interesting workaround.

I've been following George's new AppleSGLX stuff since the 2.4.0/2.3.3 stuff was released and it works MUCH better for Wine/X11/OpenGL. Anything I can do to help? Traces, bug reports, crash dumps, etc.? I'd love to get everything working without any patches, and I think it's pretty close.



---

*deadballo@…* commented *[on Mar 14, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:63 "March 14, 2009 at 10:42 PM PDT")*

-   **Cc** *deadballo@…* added



---

*mastorak@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:64 "March 17, 2009 at 5:34 PM PDT")*

I tested with 2.3.3rc1 and 2.3.3rc2 in combination with wine 1.0.1 and wine 1.1.16 and 1.1.7 and under all tests(quake3demo) i get:

    X Error of failed request:  BadDrawable (invalid Pixmap or Window parameter)
      Major opcode of failed request:  70 (X_PolyFillRectangle)
      Resource id in failed request:  0xe00008
      Serial number of failed request:  4295
      Current serial number in output stream:  4380


---

*gstaplin@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:65 "March 17, 2009 at 5:47 PM PDT")*

Replying to [mastorak@…](https://xquartz.macosforge.org/trac/ticket/122#comment:64):

> I tested with 2.3.3rc1 and 2.3.3rc2 in combination with wine 1.0.1 and wine 1.1.16 and 1.1.7 and under all tests(quake3demo) i get:
>
>     X Error of failed request:  BadDrawable (invalid Pixmap or Window parameter)
>       Major opcode of failed request:  70 (X_PolyFillRectangle)
>       Resource id in failed request:  0xe00008
>       Serial number of failed request:  4295
>       Current serial number in output stream:  4380

That's odd. I wonder what has changed. Quake worked fine before the recent macports updates... You do however need to use it in virtual screen mode. Are you doing that? I will try to look into this, and verify with the latest macports Wine.



---

*mastorak@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:66 "March 17, 2009 at 6:15 PM PDT")*

I am pretty sure that the problem is down to the fact that when wine is built glu32.dll.so is not built along with the rest of libraries.
This is probably caused by something not being in place such as the gl lib that is required to build it which I attribute to either wine looking in the wrong places(thin chance as 1.1.16 was building before) or xquartz rc1 and rc2 not providing something.
I can see the object files for glu32 being created but after the end of "make" all glu32 stuff are cleaned without the ".so" file being built.



---

*jeremyhu@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:67 "March 17, 2009 at 6:24 PM PDT")*

mastorak: Youa re building wine from macports, right? It should be using MacPorts' libGL and libGLU rather than Xquartz's. I updated GL in MacPorts to use version 55 a few days ago (the same version used in XQuartz-2.3.3\_rc2).

The issue you are seeing is very likely corrected by using the virtual desktop (run winecfg). This is a workaround for the issue where a surface is destroyed when the window is unmapped. When you have the virtual desktop in place, that is the master window and isn't unmapped.



---

*deadballo@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:68 "March 17, 2009 at 7:48 PM PDT")*

Hey folks!

I'd just like to report that I got at least one game to work. It's not strictly 3D, but it does use directx and required the export LD\_LIBRARY\_PATH=/usr/x11/lib runtime work-around (do we have a fix for this yet?)

Compiling wine 1.1.16 and using XQuartz 2.3.3RC2 I got Farm Frenzy working.

Spore plays sound, but no video appears. I believe (but not certain) the previous XQuartz didn't allow the game to progress to this point.

I'm not using MacPorts, and pretty much refuse to do so :)



---

*jeremyhu@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:69 "March 17, 2009 at 8:14 PM PDT")*

deadballo: I'm not sure what issue you're trying to workaround with LD\_LIBRARY\_PATH there, so please elaborate.

Since you're not using MacPorts, I assume you are compiling yourself (or are you using fink.)



---

*deadballo@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:70 "March 17, 2009 at 9:45 PM PDT")*

Very well.

When I configure and compile wine 1.1.16 from scratch, it compiles with OpenGL support, but can't find LibGL.dylib:

err:wgl:has\_opengl Failed to load libGL: dlopen(libGL.1.dylib, 266): image not found
err:wgl:has\_opengl OpenGL support is disabled.

Originally, I tried to set DYLD\_LIBRARY\_PATH to /usr/x11/lib and that caused some kind of recursive clusterf--k:

err:module:load\_builtin\_dll failed to load .so lib for builtin L"gdi32.dll": dlopen(/usr/local/bin/../lib/../bin/../lib/../bin/../lib/../bin/../lib/wine/gdi32.dll.so, 258): Symbol not found: <span class="underline">cg\_png\_create\_info\_struct
</span>

> Referenced from: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framewo

err:module:import\_dll Loading library gdi32.dll (which is needed by L"C:
windows
system32
user32.dll") failed (error c000007a).
err:module:load\_builtin\_dll failed to load .so lib for builtin L"OPENGL32.dll": dlopen(/usr/local/bin/../lib/wine/opengl32.dll.so, 258): Symbol not found: <span class="underline">cg\_png\_create\_info\_struct
</span>

> Referenced from: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
> Expected in: /u

err:module:import\_dll Loading library OPENGL32.dll (which is needed by L"Z:
Users
yay
Downloads
ogl\_texture
ogl\_texture.exe") failed (error c000007a).
err:module:DelayLoadFailureHook failed to delay load user32.dll.BroadcastSystemMessageW
wine: Call from 0x7b830710 to unimplemented function user32.dll.BroadcastSystemMessageW, aborting
wine: Unimplemented function user32.dll.BroadcastSystemMessageW called at address 0x7b830710 (thread 0016), starting debugger...
couldn't load main module (2)

Running the same program with only LD\_LIBRARY\_PATH set to /usr/X11/lib is the magic sauce, albeit with errors:

Xlib: extension "Generic Event Extension" missing on display "/tmp/launch-mpryYA/:0".
Xlib: extension "Generic Event Extension" missing on display "/tmp/launch-mpryYA/:0".
Xlib: extension "Generic Event Extension" missing on display "/tmp/launch-mpryYA/:0".
Xlib: extension "Generic Event Extension" missing on display "/tmp/launch-mpryYA/:0".
Xlib: extension "Generic Event Extension" missing on display "/tmp/launch-mpryYA/:0".
Xlib: extension "Generic Event Extension" missing on display "/tmp/launch-mpryYA/:0".

By the way, there is a great source for progressively more complex windows 3D programs on this web site to use for testing purposes. Some currently work, some don't.

<http://www.codesampler.com/source.htm>

There are also examples in D3D which don't work, even though their OpenGL equivalents do. For example the simplest texture app:

Shows texture then crashes:
<http://www.codesampler.com/dx9src/dx9src_3.htm#dx9_texture>

Works fine, albeit with the above mentioned errors:
<http://www.codesampler.com/oglsrc/oglsrc_2.htm#ogl_texture>

Hope this helps



---

*jeremyhu@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:71 "March 17, 2009 at 9:54 PM PDT")*

deadballo:

Use this instead:
DYLD\_FALLBACK\_LIBRARY\_PATH="/usr/X11/lib" wine

As for a fix for this in wine, edit the source, and do a setenv() for it in main()...

The "Generic Event Extension" messages are info, not errors. Due to the number of reports about this "error" that I'm seeing, I'm just going to disable the message, so people don't freak out.

Thanks for the link. I'm stepping through building and running SPECViewPerf. 8.1 builds, but we have some API issues with 9.x and 10.x that we're working on right now.



---

*jeremyhu@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:72 "March 17, 2009 at 9:55 PM PDT")*

Oh, and we're not really going to work on the DirectX support. That's all inside wine. If you can show that it works on linux wine but not on osx wine, then it's likely a GL issue that we will look into...



---

*deadballo@…* commented *[on Mar 17, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:73 "March 17, 2009 at 10:28 PM PDT")*

Half-Life (version 1) also works, although mouse movements are jerky for some reason.

I'll try version 2 and the expansion packs if I have time.



---

*mastorak@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:74 "March 18, 2009 at 7:08 AM PDT")*

I did use the emulate desktop option. I will try to test with another than macports version.



---

*mastorak@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:75 "March 18, 2009 at 7:13 AM PDT")*

Just to clear it up. Initially the 1.1.16 macports wine worked with desktop emulate and 2.3.3rc1. After friday 13 (around the time you said you changed to work with MacPorts' libGL) stoped working and i tried with several rebuilds of wine(macports) and xquartz . I tried it with and without the desktop emulate option.



---

*jeremyhu@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:76 "March 18, 2009 at 10:22 AM PDT")*

mastorak: what is the output of 'port list outdated'



---

*mastorak@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:77 "March 18, 2009 at 11:18 AM PDT")*

Replying to [jeremyhu@…](https://xquartz.macosforge.org/trac/ticket/122#comment:76):

> mastorak: what is the output of 'port list outdated'

$ sudo port outdated
No installed ports are outdated.



---

*deadballo@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:78 "March 18, 2009 at 1:41 PM PDT")*

> Use this instead: DYLD\_FALLBACK\_LIBRARY\_PATH="/usr/X11/lib" wine

I fail to see why one method is superior to the other. Also, is a setenv() going to be the official fix in wine? Seems rather hap-hazard, and demonstrates a flaw in the implementation of XQuartz.

> Oh, and we're not really going to work on the DirectX support. That's all inside wine. If you can show that it works on linux wine but not on osx wine, then it's likely a GL issue that we will look into...

I don't know of a single example on that site that doesn't work on Linux. Very simple D3D examples fail in wine for OS X. It may be a common error with most of them. The crash seems to occur after a scene is rendered.



---

*jeremyhu@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:79 "March 18, 2009 at 4:22 PM PDT")*

deadballo: It has nothing to do with XQuartz. It's entirely dlopen(). Check 'man dlopen'.

DYLD\_FALLBACK\_LIBRARY\_PATH is better than LD\_LIBRARY\_PATH because of the order dirs are searched. Again, see 'man dlopen'.



---

*deadballo@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:80 "March 18, 2009 at 7:27 PM PDT")*

jeremyhu, I know the linker uses these environment variables, but they are never necessary if the libraries are linked properly in the first place. This certainly wasn't a requirement in Tiger to get wine glx working.

I also don't see how using setenv() is going to work since the linker has already failed to link by the time the binary is loaded.

I tried it anyway, and it didn't work. The only way I can fathom it working is if I replaced wine with a bash script or some such.



---

*jeremyhu@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:81 "March 18, 2009 at 8:23 PM PDT")*

deadballo: As mentioned before: 'man dlopen'

The message you are reporting is not a linking error. The runtime loader-linker has successfully loaded the application and resolved all links. wine does not link against libGL. It uses dlopen() to load it at runtime.

If it wasn't a requirement for wine under Tiger, then it is most likely a change in wine that made that the case and not OSX. I'm guessing older versions of wine linked against libGL at build time rather than using dlopen().

DYLD\_FALLBACK\_LIBRARY\_PATH=/usr/X11/lib wine ./my.exe

That should work for you. It is what we do in MacPorts and is better than LD\_LIBRARY\_PATH because of the search order.



---

*deadballo@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:82 "March 18, 2009 at 9:02 PM PDT")*

OK, well that raises some other questions:

1) Why set env variables instead of pointing dlopen() directly to the libraries needed?

2) Why doesn't setenv() in main() (in loader/main.c) resolve the issue? The load error occurs after I check the variable with getenv()

3) Is it by some arcane historical fluke that X11/lib isn't in /usr/lib?



---

*jeremyhu@…* commented *[on Mar 18, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:83 "March 18, 2009 at 10:49 PM PDT")*

Replying to [deadballo@…](https://xquartz.macosforge.org/trac/ticket/122#comment:82):

> OK, well that raises some other questions:
>
> 1) Why set env variables instead of pointing dlopen() directly to the libraries needed?

You could do that too. I'm not a wine developer, and I don't care to figure out the best way for them to handle it given their multi-platform constraints

> 2) Why doesn't setenv() in main() (in loader/main.c) resolve the issue? The load error occurs after I check the variable with getenv()

I think it should.

> 3) Is it by some arcane historical fluke that X11/lib isn't in /usr/lib?

Yes.



---

*deadballo@…* commented *[on Mar 24, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:84 "March 24, 2009 at 3:26 AM PDT")*

Half-life 2 attempt. It \*wants\* to start, but gets hung up on GL errors, seemingly:

<http://utilitybase.com/paste/12810>



---

*deadballo@…* commented *[on Mar 24, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:85 "March 24, 2009 at 4:24 AM PDT")*

By the way, deselecting "Allow the window manager to control windows" makes hl.exe unplayable (it no longer registers keystrokes, but still registers mouse movement and clicks). I think this is a bug in XQuartz, and an unfortunate one since I like wine decorating and controlling its windows so I don't get confused between x11 and mac.

Actually, I used to use windowmaker instead of quartz-wm for the same reason, but it would never work correctly with the native windows. If there is a solution to that problem I'd love to hear it. Perhaps I need to make a custom version of wmaker to play nice with XQuartz?



---

*rwoodsmall@…* commented *[on Mar 24, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:86 "March 24, 2009 at 10:56 AM PDT")*

Your best bet to getting Steam/HL2 working is to use the "emulate virtual desktop" option for your Wine install. You can use the 'winecfg' program to enable this - select the option and set a size in winecfg's Graphics tab and re-test. It's the only way I've been able to play Steam games (Portal, mostly) successfully with Wine on my Mac.

-ryan



---

*deadballo@…* commented *[on Mar 24, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:87 "March 24, 2009 at 4:33 PM PDT")*

I tried that (and various other things). Got the same error



---

*jeremyhu@…* commented *[on Apr 23, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:88 "April 23, 2009 at 2:08 PM PDT")*

-   **Milestone** changed from *2.3.3* to *2.4.0*



---

*jeremyhu@…* commented *[on Jun 2, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:89 "June 2, 2009 at 10:40 AM PDT")*

-   **Milestone** changed from *2.4.0* to *OpenGL.framework DRI*



---

*jeremyhu@…* commented *[on Sep 28, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:90 "September 28, 2009 at 10:29 AM PDT")*

-   **Owner** changed from *gstaplin@…* to *jeremyhu@…*
-   **Status** changed from *reopened* to *new*



---

*jeremyhu@…* commented *[on Sep 28, 2009](https://xquartz.macosforge.org/trac/ticket/122#comment:91 "September 28, 2009 at 10:30 AM PDT")*

-   **Status** changed from *new* to *assigned*

Can someone summarize the remaining issues with GLX in wine? I'm having trouble seeing the forest through the trees.



---

*wsiegrist@…* commented *[on Apr 5, 2010](https://xquartz.macosforge.org/trac/ticket/122#comment:92 "April 5, 2010 at 10:44 AM PDT")*

-   **Component** changed from *xserver* to *GLX*



---

*jeremyhu@…* commented *[on Apr 11, 2010](https://xquartz.macosforge.org/trac/ticket/122#comment:93 "April 11, 2010 at 4:28 PM PDT")*

-   **Milestone** changed from *OpenGL.framework DRI* to *later*



---

*jeremyhu@…* commented *[on Apr 12, 2010](https://xquartz.macosforge.org/trac/ticket/122#comment:94 "April 12, 2010 at 11:03 AM PDT")*

-   **Status** changed from *assigned* to *closed*
-   **Milestone** changed from *later* to *2.5.0*
-   **Resolution** set to *fixed*

This bug has morphed a lot over time, and it's difficult to figure out exactly what the current problems are. As the original issue is fixed, I'm going to close this. If you have specific issues remaining with 2.5.0, please open a new bug for that issue.

Thanks.



